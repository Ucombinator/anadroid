(class (attrs public final ) com/gpl/rpg/AndorsTrail/resource/tiles/TileCache
 (super java/lang/Object)
 (source "TileCache.java")

 (field (attrs private final ) cache [object com/gpl/rpg/AndorsTrail/util/LruCache] )
 (field (attrs private final ) gcQueue [object java/lang/ref/ReferenceQueue] )
 (field (attrs private ) resourceTiles [array [object com/gpl/rpg/AndorsTrail/resource/tiles/TileCache$ResourceFileTile]] )
 (field (attrs private final ) tileIDsPerTilesetAndLocalID [object java/util/HashMap] )

(method (attrs public ) <init>()void
  (limit registers 3)
  ; this: v2 ([object com/gpl/rpg/AndorsTrail/resource/tiles/TileCache])
  (line 17)
  (invoke-direct {v2} java/lang/Object/<init> )
  (line 19)
  (new-instance v0 java/lang/ref/ReferenceQueue)
  (invoke-direct {v0} java/lang/ref/ReferenceQueue/<init> )
  (iput-object v0 v2 com/gpl/rpg/AndorsTrail/resource/tiles/TileCache.gcQueue [object java/lang/ref/ReferenceQueue])
  (line 20)
  (const/4 v0 1)
  (new-array v0 v0 [array [object com/gpl/rpg/AndorsTrail/resource/tiles/TileCache$ResourceFileTile]])
  (iput-object v0 v2 com/gpl/rpg/AndorsTrail/resource/tiles/TileCache.resourceTiles [array [object com/gpl/rpg/AndorsTrail/resource/tiles/TileCache$ResourceFileTile]])
  (line 21)
  (new-instance v0 java/util/HashMap)
  (invoke-direct {v0} java/util/HashMap/<init> )
  (iput-object v0 v2 com/gpl/rpg/AndorsTrail/resource/tiles/TileCache.tileIDsPerTilesetAndLocalID [object java/util/HashMap])
  (line 22)
  (new-instance v0 com/gpl/rpg/AndorsTrail/util/LruCache)
  (const/16 v1 1000)
  (invoke-direct {v0 v1} com/gpl/rpg/AndorsTrail/util/LruCache/<init> int )
  (iput-object v0 v2 com/gpl/rpg/AndorsTrail/resource/tiles/TileCache.cache [object com/gpl/rpg/AndorsTrail/util/LruCache])
  (line 17)
  (return-void )
 )

(method (attrs private ) cleanQueue()void
  (limit registers 4)
  ; this: v3 ([object com/gpl/rpg/AndorsTrail/resource/tiles/TileCache])
  (line 56)
  (invoke-static {} java/lang/System/gc )
  (nop )
  (label l2ae1a)
  (line 58)
  (iget-object v2 v3 com/gpl/rpg/AndorsTrail/resource/tiles/TileCache.gcQueue [object java/lang/ref/ReferenceQueue])
  (invoke-virtual {v2} java/lang/ref/ReferenceQueue/poll )
  (move-result-object v1)
  (if-nez v1 l2ae2c)
  (line 62)
  (return-void )
  (label l2ae2c)
  (line 59)
  (invoke-virtual {v1} java/lang/ref/Reference/get )
  (move-result-object v0)
  (check-cast v0 [object android/graphics/Bitmap])
  (line 60)
  (if-eqz v0 l2ae1a)
  (invoke-virtual {v0} android/graphics/Bitmap/recycle )
  (goto l2ae1a)
 )

(method (attrs public ) allocateMaxTileID(int )void
  (limit registers 6)
  ; this: v4 ([object com/gpl/rpg/AndorsTrail/resource/tiles/TileCache])
  ; parameter[0] : v5 (int)
  (const/4 v3 0)
  (line 26)
  (if-gtz v5 l2ae5c)
  (label l2ae5a)
  (line 31)
  (return-void )
  (label l2ae5c)
  (line 28)
  (iget-object v0 v4 com/gpl/rpg/AndorsTrail/resource/tiles/TileCache.resourceTiles [array [object com/gpl/rpg/AndorsTrail/resource/tiles/TileCache$ResourceFileTile]])
  (line 29)
  (add-int/lit8 v1 v5 1)
  (new-array v1 v1 [array [object com/gpl/rpg/AndorsTrail/resource/tiles/TileCache$ResourceFileTile]])
  (iput-object v1 v4 com/gpl/rpg/AndorsTrail/resource/tiles/TileCache.resourceTiles [array [object com/gpl/rpg/AndorsTrail/resource/tiles/TileCache$ResourceFileTile]])
  (line 30)
  (iget-object v1 v4 com/gpl/rpg/AndorsTrail/resource/tiles/TileCache.resourceTiles [array [object com/gpl/rpg/AndorsTrail/resource/tiles/TileCache$ResourceFileTile]])
  (array-length v2 v0)
  (invoke-static {v0 v3 v1 v3 v2} java/lang/System/arraycopy [object java/lang/Object] int [object java/lang/Object] int int )
  (goto l2ae5a)
)

(method (attrs public ) getMaxTileID()int
  (limit registers 2)
  ; this: v1 ([object com/gpl/rpg/AndorsTrail/resource/tiles/TileCache])
  (line 24)
  (iget-object v0 v1 com/gpl/rpg/AndorsTrail/resource/tiles/TileCache.resourceTiles [array [object com/gpl/rpg/AndorsTrail/resource/tiles/TileCache$ResourceFileTile]])
  (array-length v0 v0)
  (add-int/lit8 v0 v0 255)
  (return v0)
)

(method (attrs public ) getTileID([object java/lang/String] int )int
  (limit registers 4)
  ; this: v1 ([object com/gpl/rpg/AndorsTrail/resource/tiles/TileCache])
  ; parameter[0] : v2 ([object java/lang/String])
  ; parameter[1] : v3 (int)
  (line 42)
  (iget-object v0 v1 com/gpl/rpg/AndorsTrail/resource/tiles/TileCache.tileIDsPerTilesetAndLocalID [object java/util/HashMap])
  (invoke-virtual {v0 v2} java/util/HashMap/get [object java/lang/Object] )
  (move-result-object v0)
  (check-cast v0 [object android/util/SparseIntArray])
  (invoke-virtual {v0 v3} android/util/SparseIntArray/get int )
  (move-result v0)
  (return v0)
)

(method (attrs public ) loadSingleTile(int [object android/content/res/Resources] )[object android/graphics/Bitmap]
  (limit registers 9)
  ; this: v6 ([object com/gpl/rpg/AndorsTrail/resource/tiles/TileCache])
  ; parameter[0] : v7 (int)
  ; parameter[1] : v8 ([object android/content/res/Resources])
  (line 112)
  (invoke-direct {v6} com/gpl/rpg/AndorsTrail/resource/tiles/TileCache/cleanQueue )
  (line 113)
  (iget-object v4 v6 com/gpl/rpg/AndorsTrail/resource/tiles/TileCache.resourceTiles [array [object com/gpl/rpg/AndorsTrail/resource/tiles/TileCache$ResourceFileTile]])
  (aget-object v3 v4 v7)
  (line 114)
  (iget-object v4 v6 com/gpl/rpg/AndorsTrail/resource/tiles/TileCache.cache [object com/gpl/rpg/AndorsTrail/util/LruCache])
  (invoke-static {v7} java/lang/Integer/valueOf int )
  (move-result-object v5)
  (invoke-virtual {v4 v5} com/gpl/rpg/AndorsTrail/util/LruCache/get [object java/lang/Object] )
  (move-result-object v0)
  (check-cast v0 [object android/graphics/Bitmap])
  (label l2aefa)
  (line 115)
  (if-eqz v0 l2af00)
  (label l2aefe)
  (line 121)
  (return-object v0)
  (label l2af00)
  (line 117)
  (new-instance v1 com/gpl/rpg/AndorsTrail/resource/tiles/TileCutter)
  (iget-object v4 v3 com/gpl/rpg/AndorsTrail/resource/tiles/TileCache$ResourceFileTile.tileset [object com/gpl/rpg/AndorsTrail/resource/tiles/ResourceFileTileset])
  (invoke-direct {v1 v4 v8} com/gpl/rpg/AndorsTrail/resource/tiles/TileCutter/<init> [object com/gpl/rpg/AndorsTrail/resource/tiles/ResourceFileTileset] [object android/content/res/Resources] )
  (line 118)
  (iget v4 v3 com/gpl/rpg/AndorsTrail/resource/tiles/TileCache$ResourceFileTile.localID int)
  (invoke-virtual {v1 v4} com/gpl/rpg/AndorsTrail/resource/tiles/TileCutter/createTile int )
  (move-result-object v2)
  (line 119)
  (invoke-virtual {v1} com/gpl/rpg/AndorsTrail/resource/tiles/TileCutter/recycle )
  (line 120)
  (iget-object v4 v6 com/gpl/rpg/AndorsTrail/resource/tiles/TileCache.cache [object com/gpl/rpg/AndorsTrail/util/LruCache])
  (invoke-static {v7} java/lang/Integer/valueOf int )
  (move-result-object v5)
  (invoke-virtual {v4 v5 v2} com/gpl/rpg/AndorsTrail/util/LruCache/put [object java/lang/Object] [object java/lang/Object] )
  (move-object v0 v2)
  (line 121)
  (goto l2aefe)
)

(method (attrs public ) loadTilesFor([object java/util/Collection] [object android/content/res/Resources] )[object com/gpl/rpg/AndorsTrail/resource/tiles/TileCollection]
  (annotation systemVisibility [object dalvik/annotation/Signature]
    (value [array [object java/lang/String]] "("  "Ljava/util/Collection"  "<"  "Ljava/lang/Integer;"  ">;"  "Landroid/content/res/Resources;"  "Lcom/gpl/rpg/AndorsTrail/resource/tiles/TileCollection;"  ")"  "Lcom/gpl/rpg/AndorsTrail/resource/tiles/TileCollection;")
  )
  (limit registers 4)
  ; this: v1 ([object com/gpl/rpg/AndorsTrail/resource/tiles/TileCache])
  ; parameter[0] : v2 ([object java/util/Collection])
  ; parameter[1] : v3 ([object android/content/res/Resources])
  (line 64)
  (const/4 v0 0)
  (invoke-virtual {v1 v2 v3 v0} com/gpl/rpg/AndorsTrail/resource/tiles/TileCache/loadTilesFor [object java/util/Collection] [object android/content/res/Resources] [object com/gpl/rpg/AndorsTrail/resource/tiles/TileCollection] )
  (move-result-object v0)
  (return-object v0)
)

(method (attrs public ) loadTilesFor([object java/util/Collection] [object android/content/res/Resources] [object com/gpl/rpg/AndorsTrail/resource/tiles/TileCollection] )[object com/gpl/rpg/AndorsTrail/resource/tiles/TileCollection]
  (annotation systemVisibility [object dalvik/annotation/Signature]
    (value [array [object java/lang/String]] "("  "Ljava/util/Collection"  "<"  "Ljava/lang/Integer;"  ">;"  "Landroid/content/res/Resources;"  "Lcom/gpl/rpg/AndorsTrail/resource/tiles/TileCollection;"  ")"  "Lcom/gpl/rpg/AndorsTrail/resource/tiles/TileCollection;")
  )
  (limit registers 19)
  ; this: v15 ([object com/gpl/rpg/AndorsTrail/resource/tiles/TileCache])
  ; parameter[0] : v16 ([object java/util/Collection])
  ; parameter[1] : v17 ([object android/content/res/Resources])
  ; parameter[2] : v18 ([object com/gpl/rpg/AndorsTrail/resource/tiles/TileCollection])
  (line 66)
  (const/4 v6 0)
  (line 67)
  (new-instance v11 java/util/HashMap)
  (invoke-direct {v11} java/util/HashMap/<init> )
  (line 68)
  (invoke-interface/range {v16} java/util/Collection/iterator )
  (move-result-object v13)
  (label l2af78)
  (invoke-interface {v13} java/util/Iterator/hasNext )
  (move-result v12)
  (if-nez v12 l2afc0)
  (line 79)
  (const/4 v4 0)
  (label l2af86)
  (line 80)
  (if-nez v18 l2af98)
  (new-instance v18 com/gpl/rpg/AndorsTrail/resource/tiles/TileCollection)
  (move-object/from16 v0 v18)
  (invoke-direct {v0 v6} com/gpl/rpg/AndorsTrail/resource/tiles/TileCollection/<init> int )
  (label l2af98)
  (line 81)
  (invoke-virtual {v11} java/util/HashMap/entrySet )
  (move-result-object v12)
  (invoke-interface {v12} java/util/Set/iterator )
  (move-result-object v13)
  (label l2afa8)
  (invoke-interface {v13} java/util/Iterator/hasNext )
  (move-result v12)
  (if-nez v12 l2b014)
  (line 107)
  (if-eqz v4 l2afbe)
  (invoke-direct {v15} com/gpl/rpg/AndorsTrail/resource/tiles/TileCache/cleanQueue )
  (label l2afbe)
  (line 108)
  (return-object v18)
  (label l2afc0)
  (line 68)
  (invoke-interface {v13} java/util/Iterator/next )
  (move-result-object v12)
  (check-cast v12 [object java/lang/Integer])
  (invoke-virtual {v12} java/lang/Integer/intValue )
  (move-result v8)
  (label l2afd4)
  (line 69)
  (iget-object v12 v15 com/gpl/rpg/AndorsTrail/resource/tiles/TileCache.resourceTiles [array [object com/gpl/rpg/AndorsTrail/resource/tiles/TileCache$ResourceFileTile]])
  (aget-object v7 v12 v8)
  (label l2afdc)
  (line 70)
  (iget-object v12 v7 com/gpl/rpg/AndorsTrail/resource/tiles/TileCache$ResourceFileTile.tileset [object com/gpl/rpg/AndorsTrail/resource/tiles/ResourceFileTileset])
  (invoke-virtual {v11 v12} java/util/HashMap/get [object java/lang/Object] )
  (move-result-object v9)
  (check-cast v9 [object android/util/SparseArray])
  (label l2afec)
  (line 71)
  (if-nez v9 l2b004)
  (line 72)
  (new-instance v9 android/util/SparseArray)
  (label l2aff4)
  (invoke-direct {v9} android/util/SparseArray/<init> )
  (label l2affa)
  (line 73)
  (iget-object v12 v7 com/gpl/rpg/AndorsTrail/resource/tiles/TileCache$ResourceFileTile.tileset [object com/gpl/rpg/AndorsTrail/resource/tiles/ResourceFileTileset])
  (invoke-virtual {v11 v12 v9} java/util/HashMap/put [object java/lang/Object] [object java/lang/Object] )
  (label l2b004)
  (line 75)
  (invoke-virtual {v9 v8 v7} android/util/SparseArray/put int [object java/lang/Object] )
  (line 76)
  (invoke-static {v6 v8} java/lang/Math/max int int )
  (move-result v6)
  (goto l2af78)
  (label l2b014)
  (line 81)
  (invoke-interface {v13} java/util/Iterator/next )
  (move-result-object v3)
  (check-cast v3 [object java/util/Map$Entry])
  (line 82)
  (const/4 v2 0)
  (label l2b022)
  (line 84)
  (invoke-interface {v3} java/util/Map$Entry/getValue )
  (move-result-object v10)
  (check-cast v10 [object android/util/SparseArray])
  (line 85)
  (const/4 v5 0)
  (label l2b030)
  (invoke-virtual {v10} android/util/SparseArray/size )
  (move-result v12)
  (if-lt v5 v12 l2b048)
  (line 105)
  (if-eqz v2 l2afa8)
  (invoke-virtual {v2} com/gpl/rpg/AndorsTrail/resource/tiles/TileCutter/recycle )
  (goto l2afa8)
  (label l2b048)
  (line 86)
  (invoke-virtual {v10 v5} android/util/SparseArray/keyAt int )
  (move-result v8)
  (line 87)
  (invoke-virtual {v10 v5} android/util/SparseArray/valueAt int )
  (move-result-object v7)
  (check-cast v7 [object com/gpl/rpg/AndorsTrail/resource/tiles/TileCache$ResourceFileTile])
  (line 89)
  (iget-object v12 v15 com/gpl/rpg/AndorsTrail/resource/tiles/TileCache.cache [object com/gpl/rpg/AndorsTrail/util/LruCache])
  (invoke-static {v8} java/lang/Integer/valueOf int )
  (move-result-object v14)
  (invoke-virtual {v12 v14} com/gpl/rpg/AndorsTrail/util/LruCache/get [object java/lang/Object] )
  (move-result-object v1)
  (check-cast v1 [object android/graphics/Bitmap])
  (line 91)
  (if-nez v1 l2b0ce)
  (line 92)
  (if-nez v2 l2b0a2)
  (line 93)
  (if-nez v4 l2b086)
  (invoke-direct {v15} com/gpl/rpg/AndorsTrail/resource/tiles/TileCache/cleanQueue )
  (label l2b086)
  (line 94)
  (new-instance v2 com/gpl/rpg/AndorsTrail/resource/tiles/TileCutter)
  (label l2b08a)
  (invoke-interface {v3} java/util/Map$Entry/getKey )
  (move-result-object v12)
  (check-cast v12 [object com/gpl/rpg/AndorsTrail/resource/tiles/ResourceFileTileset])
  (move-object/from16 v0 v17)
  (invoke-direct {v2 v12 v0} com/gpl/rpg/AndorsTrail/resource/tiles/TileCutter/<init> [object com/gpl/rpg/AndorsTrail/resource/tiles/ResourceFileTileset] [object android/content/res/Resources] )
  (line 95)
  (const/4 v4 1)
  (label l2b0a2)
  (line 98)
  (iget v12 v7 com/gpl/rpg/AndorsTrail/resource/tiles/TileCache$ResourceFileTile.localID int)
  (invoke-virtual {v2 v12} com/gpl/rpg/AndorsTrail/resource/tiles/TileCutter/createTile int )
  (move-result-object v1)
  (line 99)
  (iget-object v12 v15 com/gpl/rpg/AndorsTrail/resource/tiles/TileCache.cache [object com/gpl/rpg/AndorsTrail/util/LruCache])
  (invoke-static {v8} java/lang/Integer/valueOf int )
  (move-result-object v14)
  (invoke-virtual {v12 v14 v1} com/gpl/rpg/AndorsTrail/util/LruCache/put [object java/lang/Object] [object java/lang/Object] )
  (line 100)
  (new-instance v12 java/lang/ref/WeakReference)
  (iget-object v14 v15 com/gpl/rpg/AndorsTrail/resource/tiles/TileCache.gcQueue [object java/lang/ref/ReferenceQueue])
  (invoke-direct {v12 v1 v14} java/lang/ref/WeakReference/<init> [object java/lang/Object] [object java/lang/ref/ReferenceQueue] )
  (label l2b0ce)
  (line 102)
  (move-object/from16 v0 v18)
  (invoke-virtual {v0 v8 v1} com/gpl/rpg/AndorsTrail/resource/tiles/TileCollection/setBitmap int [object android/graphics/Bitmap] )
  (line 85)
  (add-int/lit8 v5 v5 1)
  (goto l2b030)
)

(method (attrs public ) setTile(int [object com/gpl/rpg/AndorsTrail/resource/tiles/ResourceFileTileset] int )void
  (limit registers 7)
  ; this: v3 ([object com/gpl/rpg/AndorsTrail/resource/tiles/TileCache])
  ; parameter[0] : v4 (int)
  ; parameter[1] : v5 ([object com/gpl/rpg/AndorsTrail/resource/tiles/ResourceFileTileset])
  ; parameter[2] : v6 (int)
  (line 33)
  (iget-object v1 v3 com/gpl/rpg/AndorsTrail/resource/tiles/TileCache.resourceTiles [array [object com/gpl/rpg/AndorsTrail/resource/tiles/TileCache$ResourceFileTile]])
  (aget-object v1 v1 v4)
  (if-nez v1 l2b10e)
  (iget-object v1 v3 com/gpl/rpg/AndorsTrail/resource/tiles/TileCache.resourceTiles [array [object com/gpl/rpg/AndorsTrail/resource/tiles/TileCache$ResourceFileTile]])
  (new-instance v2 com/gpl/rpg/AndorsTrail/resource/tiles/TileCache$ResourceFileTile)
  (invoke-direct {v2 v5 v6} com/gpl/rpg/AndorsTrail/resource/tiles/TileCache$ResourceFileTile/<init> [object com/gpl/rpg/AndorsTrail/resource/tiles/ResourceFileTileset] int )
  (aput-object v2 v1 v4)
  (label l2b10e)
  (line 34)
  (iget-object v1 v3 com/gpl/rpg/AndorsTrail/resource/tiles/TileCache.tileIDsPerTilesetAndLocalID [object java/util/HashMap])
  (iget-object v2 v5 com/gpl/rpg/AndorsTrail/resource/tiles/ResourceFileTileset.tilesetName [object java/lang/String])
  (invoke-virtual {v1 v2} java/util/HashMap/get [object java/lang/Object] )
  (move-result-object v0)
  (check-cast v0 [object android/util/SparseIntArray])
  (label l2b122)
  (line 35)
  (if-nez v0 l2b13e)
  (line 36)
  (new-instance v0 android/util/SparseIntArray)
  (label l2b12a)
  (invoke-direct {v0} android/util/SparseIntArray/<init> )
  (line 37)
  (iget-object v1 v3 com/gpl/rpg/AndorsTrail/resource/tiles/TileCache.tileIDsPerTilesetAndLocalID [object java/util/HashMap])
  (iget-object v2 v5 com/gpl/rpg/AndorsTrail/resource/tiles/ResourceFileTileset.tilesetName [object java/lang/String])
  (invoke-virtual {v1 v2 v0} java/util/HashMap/put [object java/lang/Object] [object java/lang/Object] )
  (label l2b13e)
  (line 39)
  (invoke-virtual {v0 v6 v4} android/util/SparseIntArray/put int int )
  (line 40)
  (return-void )
)

)
