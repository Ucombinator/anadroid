(class (attrs public ) org/thoughtcrime/securesms/crypto/MessageDisplayHelper
 (super java/lang/Object)
 (source "MessageDisplayHelper.java")

 (field (attrs private static final ) MAX_CACHE_SIZE int 2000); 0x7d0 )
 (field (attrs private static final ) decryptedBodyCache [object java/util/LinkedHashMap] )

(method (attrs static ) <clinit>()void
  (limit registers 1)
  (line 34)
  (new-instance v0 org/thoughtcrime/securesms/crypto/MessageDisplayHelper$1)
  (invoke-direct {v0} org/thoughtcrime/securesms/crypto/MessageDisplayHelper$1/<init> )
  (sput-object v0 org/thoughtcrime/securesms/crypto/MessageDisplayHelper.decryptedBodyCache [object java/util/LinkedHashMap])
  (line 30)
  (return-void )
 )

(method (attrs public ) <init>()void
  (limit registers 1)
  ; this: v0 ([object org/thoughtcrime/securesms/crypto/MessageDisplayHelper])
  (line 30)
  (invoke-direct {v0} java/lang/Object/<init> )
  (return-void )
 )

(method (attrs private static ) checkCacheForBody([object java/lang/String] )[object java/lang/String]
  (limit registers 4)
  ; parameter[0] : v3 ([object java/lang/String])
  (const/4 v2 0)
  (line 66)
  (sget-object v1 org/thoughtcrime/securesms/crypto/MessageDisplayHelper.decryptedBodyCache [object java/util/LinkedHashMap])
  (invoke-virtual {v1 v3} java/util/LinkedHashMap/containsKey [object java/lang/Object] )
  (move-result v1)
  (if-eqz v1 l9c42e)
  (line 67)
  (sget-object v1 org/thoughtcrime/securesms/crypto/MessageDisplayHelper.decryptedBodyCache [object java/util/LinkedHashMap])
  (invoke-virtual {v1 v3} java/util/LinkedHashMap/get [object java/lang/Object] )
  (move-result-object v1)
  (check-cast v1 [object java/lang/ref/SoftReference])
  (invoke-virtual {v1} java/lang/ref/SoftReference/get )
  (move-result-object v0)
  (check-cast v0 [object java/lang/String])
  (label l9c41a)
  (line 68)
  (if-eqz v0 l9c420)
  (label l9c41e)
  (line 76)
  (return-object v0)
  (label l9c420)
  (line 71)
  (sget-object v1 org/thoughtcrime/securesms/crypto/MessageDisplayHelper.decryptedBodyCache [object java/util/LinkedHashMap])
  (invoke-virtual {v1 v3} java/util/LinkedHashMap/remove [object java/lang/Object] )
  (move-object v0 v2)
  (line 72)
  (goto l9c41e)
  (label l9c42e)
  (move-object v0 v2)
  (line 76)
  (goto l9c41e)
 )

(method (attrs private static ) isInProcessAsymmetricMessage([object java/lang/String] long )boolean
  (limit registers 7)
  ; parameter[0] : v4 ([object java/lang/String])
  ; parameter[1] : v5 (long)
  (const-wide/16 v2 0)
  (line 46)
  (const-wide/16 v0 47)
  (cmp-long v0 v5 v0)
  (if-eqz v0 l9c488)
  (cmp-long v0 v5 v2)
  (if-nez v0 l9c46c)
  (const-string v0 "?TextSecureAsymmetricEncrypt")
  (invoke-virtual {v4 v0} java/lang/String/startsWith [object java/lang/String] )
  (move-result v0)
  (if-nez v0 l9c488)
  (label l9c46c)
  (cmp-long v0 v5 v2)
  (if-nez v0 l9c484)
  (const-string v0 "?TextSecureAsymmetricLocalEncrypt")
  (invoke-virtual {v4 v0} java/lang/String/startsWith [object java/lang/String] )
  (move-result v0)
  (if-nez v0 l9c488)
  (label l9c484)
  (const/4 v0 0)
  (label l9c486)
  (return v0)
  (label l9c488)
  (const/4 v0 1)
  (goto l9c486)
 )

(method (attrs private static ) isKeyExchange([object java/lang/String] )boolean
  (limit registers 2)
  ; parameter[0] : v1 ([object java/lang/String])
  (line 54)
  (const-string v0 "?TextSecureKeyExchange")
  (invoke-virtual {v1 v0} java/lang/String/startsWith [object java/lang/String] )
  (move-result v0)
  (return v0)
 )

(method (attrs private static ) isProcessedKeyExchange([object java/lang/String] )boolean
  (limit registers 2)
  ; parameter[0] : v1 ([object java/lang/String])
  (line 58)
  (const-string v0 "?TextSecureKeyExchangd")
  (invoke-virtual {v1 v0} java/lang/String/startsWith [object java/lang/String] )
  (move-result v0)
  (return v0)
 )

(method (attrs private static ) isRogueAsymmetricMessage(long )boolean
  (limit registers 4)
  ; parameter[0] : v2 (long)
  (line 50)
  (const-wide/16 v0 48)
  (cmp-long v0 v2 v0)
  (if-nez v0 l9c4ec)
  (const/4 v0 1)
  (label l9c4ea)
  (return v0)
  (label l9c4ec)
  (const/4 v0 0)
  (goto l9c4ea)
 )

(method (attrs private static ) isStaleKeyExchange([object java/lang/String] )boolean
  (limit registers 2)
  ; parameter[0] : v1 ([object java/lang/String])
  (line 62)
  (const-string v0 "?TextSecureKeyExchangs")
  (invoke-virtual {v1 v0} java/lang/String/startsWith [object java/lang/String] )
  (move-result v0)
  (return v0)
 )

(method (attrs private static ) isUnreadableAsymmetricMessage(long )boolean
  (limit registers 4)
  ; parameter[0] : v2 (long)
  (line 42)
  (const-wide/16 v0 46)
  (cmp-long v0 v2 v0)
  (if-nez v0 l9c530)
  (const/4 v0 1)
  (label l9c52e)
  (return v0)
  (label l9c530)
  (const/4 v0 0)
  (goto l9c52e)
 )

(method (attrs public static ) setDecryptedMessageBody([object android/content/Context] [object java/lang/String] [object org/thoughtcrime/securesms/database/MessageRecord] [object org/thoughtcrime/securesms/crypto/MasterCipher] )void
  (limit registers 10)
  ; parameter[0] : v6 ([object android/content/Context])
  ; parameter[1] : v7 ([object java/lang/String])
  ; parameter[2] : v8 ([object org/thoughtcrime/securesms/database/MessageRecord])
  ; parameter[3] : v9 ([object org/thoughtcrime/securesms/crypto/MasterCipher])
  (catch org/thoughtcrime/securesms/util/InvalidMessageException from l9c61a to l9c6c8 using l9c5fc)
  (catch org/thoughtcrime/securesms/util/InvalidMessageException from l9c546 to l9c5fa using l9c5fc)
  (const/4 v5 1)
  (label l9c546)
  (line 83)
  (const-string v3 "?TextSecureLocalEncrypt")
  (invoke-virtual {v7 v3} java/lang/String/startsWith [object java/lang/String] )
  (move-result v3)
  (if-eqz v3 l9c564)
  (line 84)
  (invoke-static {v7} org/thoughtcrime/securesms/crypto/MessageDisplayHelper/checkCacheForBody [object java/lang/String] )
  (move-result-object v0)
  (label l9c55e)
  (line 85)
  (if-eqz v0 l9c596)
  (line 86)
  (move-object v7 v0)
  (label l9c564)
  (line 94)
  (invoke-virtual {v8} org/thoughtcrime/securesms/database/MessageRecord/getType )
  (move-result-wide v3)
  (invoke-static {v3 v4} org/thoughtcrime/securesms/crypto/MessageDisplayHelper/isUnreadableAsymmetricMessage long )
  (move-result v3)
  (if-eqz v3 l9c5ca)
  (line 95)
  (const v3 2131427478) ; 0x7f0b0096)
  (invoke-virtual {v6 v3} android/content/Context/getString int )
  (move-result-object v3)
  (invoke-virtual {v8 v3} org/thoughtcrime/securesms/database/MessageRecord/setBody [object java/lang/String] )
  (line 96)
  (const/4 v3 1)
  (invoke-virtual {v8 v3} org/thoughtcrime/securesms/database/MessageRecord/setEmphasis boolean )
  (label l9c594)
  (line 123)
  (return-void )
  (label l9c596)
  (line 88)
  (const-string v3 "?TextSecureLocalEncrypt")
  (invoke-virtual {v3} java/lang/String/length )
  (move-result v3)
  (invoke-virtual {v7 v3} java/lang/String/substring int )
  (move-result-object v3)
  (invoke-virtual {v9 v3} org/thoughtcrime/securesms/crypto/MasterCipher/decryptBody [object java/lang/String] )
  (move-result-object v1)
  (label l9c5b2)
  (line 89)
  (sget-object v3 org/thoughtcrime/securesms/crypto/MessageDisplayHelper.decryptedBodyCache [object java/util/LinkedHashMap])
  (new-instance v4 java/lang/ref/SoftReference)
  (invoke-direct {v4 v1} java/lang/ref/SoftReference/<init> [object java/lang/Object] )
  (invoke-virtual {v3 v7 v4} java/util/LinkedHashMap/put [object java/lang/Object] [object java/lang/Object] )
  (line 90)
  (move-object v7 v1)
  (goto l9c564)
  (label l9c5ca)
  (line 97)
  (invoke-virtual {v8} org/thoughtcrime/securesms/database/MessageRecord/getType )
  (move-result-wide v3)
  (invoke-static {v7 v3 v4} org/thoughtcrime/securesms/crypto/MessageDisplayHelper/isInProcessAsymmetricMessage [object java/lang/String] long )
  (move-result v3)
  (if-eqz v3 l9c61a)
  (line 98)
  (const v3 2131427479) ; 0x7f0b0097)
  (invoke-virtual {v6 v3} android/content/Context/getString int )
  (move-result-object v3)
  (invoke-virtual {v8 v3} org/thoughtcrime/securesms/database/MessageRecord/setBody [object java/lang/String] )
  (line 99)
  (const/4 v3 1)
  (invoke-virtual {v8 v3} org/thoughtcrime/securesms/database/MessageRecord/setEmphasis boolean )
  (label l9c5fa)
  (goto l9c594)
  (label l9c5fc)
  (line 119)
  (move-exception v2)
  (label l9c5fe)
  (line 120)
  (const v3 2131427481) ; 0x7f0b0099)
  (invoke-virtual {v6 v3} android/content/Context/getString int )
  (move-result-object v3)
  (invoke-virtual {v8 v3} org/thoughtcrime/securesms/database/MessageRecord/setBody [object java/lang/String] )
  (line 121)
  (invoke-virtual {v8 v5} org/thoughtcrime/securesms/database/MessageRecord/setEmphasis boolean )
  (goto l9c594)
  (label l9c61a)
  (line 100)
  (invoke-virtual {v8} org/thoughtcrime/securesms/database/MessageRecord/getType )
  (move-result-wide v3)
  (invoke-static {v3 v4} org/thoughtcrime/securesms/crypto/MessageDisplayHelper/isRogueAsymmetricMessage long )
  (move-result v3)
  (if-eqz v3 l9c64c)
  (line 101)
  (const v3 2131427480) ; 0x7f0b0098)
  (invoke-virtual {v6 v3} android/content/Context/getString int )
  (move-result-object v3)
  (invoke-virtual {v8 v3} org/thoughtcrime/securesms/database/MessageRecord/setBody [object java/lang/String] )
  (line 102)
  (const/4 v3 1)
  (invoke-virtual {v8 v3} org/thoughtcrime/securesms/database/MessageRecord/setEmphasis boolean )
  (goto l9c594)
  (label l9c64c)
  (line 103)
  (invoke-static {v7} org/thoughtcrime/securesms/crypto/MessageDisplayHelper/isKeyExchange [object java/lang/String] )
  (move-result v3)
  (if-eqz v3 l9c670)
  (line 104)
  (const/4 v3 1)
  (invoke-virtual {v8 v3} org/thoughtcrime/securesms/database/MessageRecord/setKeyExchange boolean )
  (line 105)
  (const/4 v3 1)
  (invoke-virtual {v8 v3} org/thoughtcrime/securesms/database/MessageRecord/setEmphasis boolean )
  (line 106)
  (invoke-virtual {v8 v7} org/thoughtcrime/securesms/database/MessageRecord/setBody [object java/lang/String] )
  (goto l9c594)
  (label l9c670)
  (line 107)
  (invoke-static {v7} org/thoughtcrime/securesms/crypto/MessageDisplayHelper/isProcessedKeyExchange [object java/lang/String] )
  (move-result v3)
  (if-eqz v3 l9c694)
  (line 108)
  (const/4 v3 1)
  (invoke-virtual {v8 v3} org/thoughtcrime/securesms/database/MessageRecord/setProcessedKeyExchange boolean )
  (line 109)
  (const/4 v3 1)
  (invoke-virtual {v8 v3} org/thoughtcrime/securesms/database/MessageRecord/setEmphasis boolean )
  (line 110)
  (invoke-virtual {v8 v7} org/thoughtcrime/securesms/database/MessageRecord/setBody [object java/lang/String] )
  (goto l9c594)
  (label l9c694)
  (line 111)
  (invoke-static {v7} org/thoughtcrime/securesms/crypto/MessageDisplayHelper/isStaleKeyExchange [object java/lang/String] )
  (move-result v3)
  (if-eqz v3 l9c6ba)
  (line 112)
  (const/4 v3 1)
  (invoke-virtual {v8 v3} org/thoughtcrime/securesms/database/MessageRecord/setStaleKeyExchange boolean )
  (line 113)
  (const/4 v3 1)
  (invoke-virtual {v8 v3} org/thoughtcrime/securesms/database/MessageRecord/setEmphasis boolean )
  (line 114)
  (invoke-virtual {v8 v7} org/thoughtcrime/securesms/database/MessageRecord/setBody [object java/lang/String] )
  (goto/16 l9c594)
  (label l9c6ba)
  (line 116)
  (invoke-virtual {v8 v7} org/thoughtcrime/securesms/database/MessageRecord/setBody [object java/lang/String] )
  (line 117)
  (const/4 v3 0)
  (invoke-virtual {v8 v3} org/thoughtcrime/securesms/database/MessageRecord/setEmphasis boolean )
  (label l9c6c8)
  (goto/16 l9c594)
 )

)
