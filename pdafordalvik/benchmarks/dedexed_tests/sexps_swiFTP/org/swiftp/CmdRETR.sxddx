(class (attrs public ) org/swiftp/CmdRETR
 (super org/swiftp/FtpCmd)
 (source "CmdRETR.java")
 (implements java/lang/Runnable)

 (field (attrs protected ) input [object java/lang/String] )

(method (attrs public ) <init>([object org/swiftp/SessionThread] [object java/lang/String] )void
  (limit registers 4)
  ; this: v1 ([object org/swiftp/CmdRETR])
  ; parameter[0] : v2 ([object org/swiftp/SessionThread])
  ; parameter[1] : v3 ([object java/lang/String])
  (line 34)
  (const-class v0 org/swiftp/CmdRETR)
  (invoke-virtual {v0} java/lang/Class/toString )
  (move-result-object v0)
  (invoke-direct {v1 v2 v0} org/swiftp/FtpCmd/<init> [object org/swiftp/SessionThread] [object java/lang/String] )
  (line 35)
  (iput-object v3 v1 org/swiftp/CmdRETR.input [object java/lang/String])
  (line 36)
  (return-void )
 )

(method (attrs public ) run()void
  (limit registers 16)
  ; this: v15 ([object org/swiftp/CmdRETR])
  (catch java/io/FileNotFoundException from l7226 to l72d4 using l71f6)
  (catch java/io/IOException from l7226 to l72d4 using l721a)
  (catch java/io/FileNotFoundException from l7202 to l7216 using l71f6)
  (catch java/io/IOException from l7202 to l7216 using l721a)
  (catch java/io/FileNotFoundException from l715c to l71f2 using l71f6)
  (catch java/io/IOException from l715c to l71f2 using l721a)
  (line 39)
  (iget-object v11 v15 org/swiftp/CmdRETR.myLog [object org/swiftp/MyLog])
  (const/4 v12 3)
  (const-string v13 "RETR executing")
  (invoke-virtual {v11 v12 v13} org/swiftp/MyLog/l int [object java/lang/String] )
  (line 40)
  (iget-object v11 v15 org/swiftp/CmdRETR.input [object java/lang/String])
  (invoke-static {v11} org/swiftp/CmdRETR/getParameter [object java/lang/String] )
  (move-result-object v9)
  (line 42)
  (const/4 v5 0)
  (line 45)
  (iget-object v11 v15 org/swiftp/CmdRETR.sessionThread [object org/swiftp/SessionThread])
  (invoke-virtual {v11} org/swiftp/SessionThread/getWorkingDir )
  (move-result-object v11)
  (invoke-static {v11 v9} org/swiftp/CmdRETR/inputPathToChrootedFile [object java/io/File] [object java/lang/String] )
  (move-result-object v6)
  (line 46)
  (invoke-virtual {v15 v6} org/swiftp/CmdRETR/violatesChroot [object java/io/File] )
  (move-result v11)
  (if-eqz v11 l70d4)
  (line 47)
  (const-string v5 "550 Invalid name or chroot violation\r\n")
  (label l70aa)
  (line 140)
  (iget-object v11 v15 org/swiftp/CmdRETR.sessionThread [object org/swiftp/SessionThread])
  (invoke-virtual {v11} org/swiftp/SessionThread/closeDataSocket )
  (line 141)
  (if-eqz v5 l72da)
  (line 142)
  (iget-object v11 v15 org/swiftp/CmdRETR.sessionThread [object org/swiftp/SessionThread])
  (invoke-virtual {v11 v5} org/swiftp/SessionThread/writeString [object java/lang/String] )
  (label l70c2)
  (line 146)
  (iget-object v11 v15 org/swiftp/CmdRETR.myLog [object org/swiftp/MyLog])
  (const/4 v12 3)
  (const-string v13 "RETR done")
  (invoke-virtual {v11 v12 v13} org/swiftp/MyLog/l int [object java/lang/String] )
  (line 147)
  (return-void )
  (label l70d4)
  (line 49)
  (invoke-virtual {v6} java/io/File/isDirectory )
  (move-result v11)
  (if-eqz v11 l70f6)
  (line 50)
  (iget-object v11 v15 org/swiftp/CmdRETR.myLog [object org/swiftp/MyLog])
  (const/4 v12 3)
  (const-string v13 "Ignoring RETR for directory")
  (invoke-virtual {v11 v12 v13} org/swiftp/MyLog/l int [object java/lang/String] )
  (line 51)
  (const-string v5 "550 Can't RETR a directory\r\n")
  (line 52)
  (goto l70aa)
  (label l70f6)
  (line 53)
  (invoke-virtual {v6} java/io/File/exists )
  (move-result v11)
  (if-nez v11 l713a)
  (line 54)
  (iget-object v11 v15 org/swiftp/CmdRETR.myLog [object org/swiftp/MyLog])
  (const/4 v12 4)
  (new-instance v13 java/lang/StringBuilder)
  (const-string v14 "Can't RETR nonexistent file: ")
  (invoke-direct {v13 v14} java/lang/StringBuilder/<init> [object java/lang/String] )
  (line 55)
  (invoke-virtual {v6} java/io/File/getAbsolutePath )
  (move-result-object v14)
  (invoke-virtual {v13 v14} java/lang/StringBuilder/append [object java/lang/String] )
  (move-result-object v13)
  (invoke-virtual {v13} java/lang/StringBuilder/toString )
  (move-result-object v13)
  (line 54)
  (invoke-virtual {v11 v12 v13} org/swiftp/MyLog/l int [object java/lang/String] )
  (line 56)
  (const-string v5 "550 File does not exist\r\n")
  (line 57)
  (goto l70aa)
  (label l713a)
  (line 58)
  (invoke-virtual {v6} java/io/File/canRead )
  (move-result v11)
  (if-nez v11 l715c)
  (line 59)
  (iget-object v11 v15 org/swiftp/CmdRETR.myLog [object org/swiftp/MyLog])
  (const/4 v12 4)
  (const-string v13 "Failed RETR permission (canRead() is false)")
  (invoke-virtual {v11 v12 v13} org/swiftp/MyLog/l int [object java/lang/String] )
  (line 60)
  (const-string v5 "550 No read permissions\r\n")
  (line 61)
  (goto l70aa)
  (label l715c)
  (line 68)
  (new-instance v7 java/io/FileInputStream)
  (invoke-direct {v7 v6} java/io/FileInputStream/<init> [object java/io/File] )
  (label l7166)
  (line 69)
  (invoke-static {} org/swiftp/Defaults/getDataChunkSize )
  (nop )
  (move-result v11)
  (new-array v0 v11 [array byte])
  (label l7172)
  (line 71)
  (iget-object v11 v15 org/swiftp/CmdRETR.sessionThread [object org/swiftp/SessionThread])
  (invoke-virtual {v11} org/swiftp/SessionThread/startUsingDataSocket )
  (move-result v11)
  (if-eqz v11 l7202)
  (line 72)
  (iget-object v11 v15 org/swiftp/CmdRETR.myLog [object org/swiftp/MyLog])
  (const/4 v12 3)
  (const-string v13 "RETR opened data socket")
  (invoke-virtual {v11 v12 v13} org/swiftp/MyLog/l int [object java/lang/String] )
  (line 78)
  (iget-object v11 v15 org/swiftp/CmdRETR.sessionThread [object org/swiftp/SessionThread])
  (const-string v12 "150 Sending file\r\n")
  (invoke-virtual {v11 v12} org/swiftp/SessionThread/writeString [object java/lang/String] )
  (line 79)
  (iget-object v11 v15 org/swiftp/CmdRETR.sessionThread [object org/swiftp/SessionThread])
  (invoke-virtual {v11} org/swiftp/SessionThread/isBinaryMode )
  (move-result v11)
  (if-eqz v11 l7226)
  (line 80)
  (iget-object v11 v15 org/swiftp/CmdRETR.myLog [object org/swiftp/MyLog])
  (const/4 v12 3)
  (const-string v13 "Transferring in binary mode")
  (invoke-virtual {v11 v12 v13} org/swiftp/MyLog/l int [object java/lang/String] )
  (label l71c0)
  (line 81)
  (invoke-virtual {v7 v0} java/io/FileInputStream/read [array byte] )
  (move-result v1)
  (label l71c8)
  (const/4 v11 15)
  (if-eq v1 v11 l70aa)
  (line 84)
  (iget-object v11 v15 org/swiftp/CmdRETR.sessionThread [object org/swiftp/SessionThread])
  (line 85)
  (invoke-virtual {v11 v0 v1} org/swiftp/SessionThread/sendViaDataSocket [array byte] int )
  (move-result v11)
  (if-nez v11 l71c0)
  (line 87)
  (const-string v5 "426 Data socket error\r\n")
  (line 88)
  (iget-object v11 v15 org/swiftp/CmdRETR.myLog [object org/swiftp/MyLog])
  (const/4 v12 4)
  (const-string v13 "Data socket error")
  (invoke-virtual {v11 v12 v13} org/swiftp/MyLog/l int [object java/lang/String] )
  (label l71f2)
  (goto/16 l70aa)
  (label l71f6)
  (line 132)
  (move-exception v11)
  (move-object v3 v11)
  (label l71fa)
  (line 133)
  (const-string v5 "550 File not found\r\n")
  (line 134)
  (goto/16 l70aa)
  (label l7202)
  (line 74)
  (const-string v5 "425 Error opening socket\r\n")
  (line 75)
  (iget-object v11 v15 org/swiftp/CmdRETR.myLog [object org/swiftp/MyLog])
  (const/4 v12 4)
  (const-string v13 "Error in initDataSocket()")
  (invoke-virtual {v11 v12 v13} org/swiftp/MyLog/l int [object java/lang/String] )
  (label l7216)
  (goto/16 l70aa)
  (label l721a)
  (line 135)
  (move-exception v11)
  (move-object v3 v11)
  (label l721e)
  (line 136)
  (const-string v5 "425 Network error\r\n")
  (goto/16 l70aa)
  (label l7226)
  (line 93)
  (iget-object v11 v15 org/swiftp/CmdRETR.myLog [object org/swiftp/MyLog])
  (const/4 v12 3)
  (const-string v13 "Transferring in ASCII mode")
  (invoke-virtual {v11 v12 v13} org/swiftp/MyLog/l int [object java/lang/String] )
  (line 95)
  (const/4 v8 0)
  (label l7238)
  (line 96)
  (invoke-virtual {v7 v0} java/io/FileInputStream/read [array byte] )
  (move-result v1)
  (label l7240)
  (const/4 v11 15)
  (if-eq v1 v11 l70aa)
  (line 97)
  (const/4 v10 0)
  (label l7248)
  (const/4 v4 0)
  (label l724a)
  (line 98)
  (const/4 v11 2)
  (new-array v2 v11 [array byte])
  (fill-array-data v2 l72ec)
  (label l7256)
  (line 99)
  (const/4 v4 0)
  (label l7258)
  (if-lt v4 v1 l7280)
  (line 123)
  (iget-object v11 v15 org/swiftp/CmdRETR.sessionThread [object org/swiftp/SessionThread])
  (line 124)
  (sub-int v12 v4 v10)
  (line 123)
  (invoke-virtual {v11 v0 v10 v12} org/swiftp/SessionThread/sendViaDataSocket [array byte] int int )
  (line 125)
  (const/4 v11 1)
  (sub-int v11 v1 v11)
  (aget-byte v11 v0 v11)
  (const/16 v12 13)
  (if-ne v11 v12 l72d6)
  (line 126)
  (const/4 v8 1)
  (goto l7238)
  (label l7280)
  (line 100)
  (aget-byte v11 v0 v4)
  (const/16 v12 10)
  (if-ne v11 v12 l72b0)
  (line 102)
  (iget-object v11 v15 org/swiftp/CmdRETR.sessionThread [object org/swiftp/SessionThread])
  (line 103)
  (sub-int v12 v4 v10)
  (line 102)
  (invoke-virtual {v11 v0 v10 v12} org/swiftp/SessionThread/sendViaDataSocket [array byte] int int )
  (line 104)
  (if-nez v4 l72b6)
  (line 107)
  (if-nez v8 l72ae)
  (line 110)
  (iget-object v11 v15 org/swiftp/CmdRETR.sessionThread [object org/swiftp/SessionThread])
  (const/4 v12 1)
  (invoke-virtual {v11 v2 v12} org/swiftp/SessionThread/sendViaDataSocket [array byte] int )
  (label l72ae)
  (line 118)
  (move v10 v4)
  (label l72b0)
  (line 99)
  (add-int/lit8 v4 v4 1)
  (goto l7258)
  (label l72b6)
  (line 112)
  (const/4 v11 1)
  (sub-int v11 v4 v11)
  (aget-byte v11 v0 v11)
  (const/16 v12 13)
  (if-eq v11 v12 l72ae)
  (line 114)
  (iget-object v11 v15 org/swiftp/CmdRETR.sessionThread [object org/swiftp/SessionThread])
  (const/4 v12 1)
  (invoke-virtual {v11 v2 v12} org/swiftp/SessionThread/sendViaDataSocket [array byte] int )
  (label l72d4)
  (goto l72ae)
  (label l72d6)
  (line 128)
  (const/4 v8 0)
  (goto l7238)
  (label l72da)
  (line 144)
  (iget-object v11 v15 org/swiftp/CmdRETR.sessionThread [object org/swiftp/SessionThread])
  (const-string v12 "226 Transmission finished\r\n")
  (invoke-virtual {v11 v12} org/swiftp/SessionThread/writeString [object java/lang/String] )
  (goto/16 l70c2)
  (line 98)
  (label l72ec)
  (data-array
    (0x0D) ; #0
    (0x0A) ; #1
  )
)

)
