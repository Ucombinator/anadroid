(class (attrs public ) org/thoughtcrime/securesms/mms/ImageSlide
 (super org/thoughtcrime/securesms/mms/Slide)
 (source "ImageSlide.java")

 (field (attrs private static final ) MAX_CACHE_SIZE int 10); 0xa )
 (field (attrs private static final ) thumbnailCache [object java/util/LinkedHashMap] )

(method (attrs static ) <clinit>()void
  (limit registers 1)
  (line 42)
  (new-instance v0 org/thoughtcrime/securesms/mms/ImageSlide$1)
  (invoke-direct {v0} org/thoughtcrime/securesms/mms/ImageSlide$1/<init> )
  (sput-object v0 org/thoughtcrime/securesms/mms/ImageSlide.thumbnailCache [object java/util/LinkedHashMap])
  (line 38)
  (return-void )
 )

(method (attrs public ) <init>([object android/content/Context] [object android/net/Uri] )void
  (annotation systemVisibility [object dalvik/annotation/Throws]
    (value [array [object java/lang/String]] [object java/io/IOException])
  )
  (limit registers 4)
  ; this: v1 ([object org/thoughtcrime/securesms/mms/ImageSlide])
  ; parameter[0] : v2 ([object android/content/Context])
  ; parameter[1] : v3 ([object android/net/Uri])
  (line 54)
  (invoke-static {v2 v3} org/thoughtcrime/securesms/mms/ImageSlide/constructPartFromUri [object android/content/Context] [object android/net/Uri] )
  (move-result-object v0)
  (invoke-direct {v1 v2 v0} org/thoughtcrime/securesms/mms/Slide/<init> [object android/content/Context] [object ws/com/google/android/mms/pdu/PduPart] )
  (line 55)
  (return-void )
 )

(method (attrs public ) <init>([object android/content/Context] [object org/thoughtcrime/securesms/crypto/MasterSecret] [object ws/com/google/android/mms/pdu/PduPart] )void
  (annotation systemVisibility [object dalvik/annotation/Throws]
    (value [array [object java/lang/String]] [object java/io/IOException])
  )
  (limit registers 4)
  ; this: v0 ([object org/thoughtcrime/securesms/mms/ImageSlide])
  ; parameter[0] : v1 ([object android/content/Context])
  ; parameter[1] : v2 ([object org/thoughtcrime/securesms/crypto/MasterSecret])
  ; parameter[2] : v3 ([object ws/com/google/android/mms/pdu/PduPart])
  (line 50)
  (invoke-direct {v0 v1 v2 v3} org/thoughtcrime/securesms/mms/Slide/<init> [object android/content/Context] [object org/thoughtcrime/securesms/crypto/MasterSecret] [object ws/com/google/android/mms/pdu/PduPart] )
  (line 51)
  (return-void )
 )

(method (attrs private static ) constructPartFromUri([object android/content/Context] [object android/net/Uri] )[object ws/com/google/android/mms/pdu/PduPart]
  (annotation systemVisibility [object dalvik/annotation/Throws]
    (value [array [object java/lang/String]] [object java/io/IOException])
  )
  (limit registers 12)
  ; parameter[0] : v10 ([object android/content/Context])
  ; parameter[1] : v11 ([object android/net/Uri])
  (const/16 v5 640)
  (const/16 v6 480)
  (line 107)
  (new-instance v9 ws/com/google/android/mms/pdu/PduPart)
  (invoke-direct {v9} ws/com/google/android/mms/pdu/PduPart/<init> )
  (line 109)
  (invoke-static {v10 v11} org/thoughtcrime/securesms/mms/ImageSlide/getImageDimensions [object android/content/Context] [object android/net/Uri] )
  (move-result-object v2)
  (line 110)
  (invoke-static {v10 v11} org/thoughtcrime/securesms/mms/ImageSlide/getMediaSize [object android/content/Context] [object android/net/Uri] )
  (move-result-wide v3)
  (line 112)
  (iget v0 v2 android/graphics/BitmapFactory$Options.outWidth int)
  (if-gt v0 v5 la5450)
  (iget v0 v2 android/graphics/BitmapFactory$Options.outHeight int)
  (if-gt v0 v6 la5450)
  (const-wide/32 v0 1048576) ; 0x100000)
  (cmp-long v0 v3 v0)
  (if-lez v0 la5474)
  (label la5450)
  (line 113)
  (const/high16 v7 16)
  (move-object v0 v10)
  (move-object v1 v11)
  (invoke-static/range {v0 .. v7} org/thoughtcrime/securesms/mms/ImageSlide/scaleImage [object android/content/Context] [object android/net/Uri] [object android/graphics/BitmapFactory$Options] long int int int )
  (move-result-object v8)
  (label la5460)
  (line 114)
  (invoke-virtual {v9 v8} ws/com/google/android/mms/pdu/PduPart/setData [array byte] )
  (line 115)
  (const-string v0 "ImageSlide")
  (const-string v1 "Setting actual part data...")
  (invoke-static {v0 v1} android/util/Log/w [object java/lang/String] [object java/lang/String] )
  (label la5474)
  (line 118)
  (const-string v0 "ImageSlide")
  (const-string v1 "Setting part data URI..")
  (invoke-static {v0 v1} android/util/Log/w [object java/lang/String] [object java/lang/String] )
  (line 119)
  (invoke-virtual {v9 v11} ws/com/google/android/mms/pdu/PduPart/setDataUri [object android/net/Uri] )
  (line 120)
  (const-string v0 "image/jpeg")
  (invoke-virtual {v0} java/lang/String/getBytes )
  (move-result-object v0)
  (invoke-virtual {v9 v0} ws/com/google/android/mms/pdu/PduPart/setContentType [array byte] )
  (line 121)
  (new-instance v0 java/lang/StringBuilder)
  (invoke-static {} java/lang/System/currentTimeMillis )
  (nop )
  (move-result-wide v5)
  (invoke-static {v5 v6} java/lang/String/valueOf long )
  (move-result-object v1)
  (invoke-direct {v0 v1} java/lang/StringBuilder/<init> [object java/lang/String] )
  (invoke-virtual {v0} java/lang/StringBuilder/toString )
  (move-result-object v0)
  (invoke-virtual {v0} java/lang/String/getBytes )
  (move-result-object v0)
  (invoke-virtual {v9 v0} ws/com/google/android/mms/pdu/PduPart/setContentId [array byte] )
  (line 122)
  (new-instance v0 java/lang/StringBuilder)
  (const-string v1 "Image")
  (invoke-direct {v0 v1} java/lang/StringBuilder/<init> [object java/lang/String] )
  (invoke-static {} java/lang/System/currentTimeMillis )
  (nop )
  (move-result-wide v5)
  (invoke-virtual {v0 v5 v6} java/lang/StringBuilder/append long )
  (move-result-object v0)
  (invoke-virtual {v0} java/lang/StringBuilder/toString )
  (move-result-object v0)
  (invoke-virtual {v0} java/lang/String/getBytes )
  (move-result-object v0)
  (invoke-virtual {v9 v0} ws/com/google/android/mms/pdu/PduPart/setName [array byte] )
  (line 124)
  (return-object v9)
 )

(method (attrs private static ) getImageDimensions([object android/content/Context] [object android/net/Uri] )[object android/graphics/BitmapFactory$Options]
  (annotation systemVisibility [object dalvik/annotation/Throws]
    (value [array [object java/lang/String]] [object java/io/FileNotFoundException])
  )
  (limit registers 4)
  ; parameter[0] : v2 ([object android/content/Context])
  ; parameter[1] : v3 ([object android/net/Uri])
  (line 97)
  (invoke-virtual {v2} android/content/Context/getContentResolver )
  (move-result-object v1)
  (invoke-virtual {v1 v3} android/content/ContentResolver/openInputStream [object android/net/Uri] )
  (move-result-object v0)
  (line 98)
  (invoke-static {v0} org/thoughtcrime/securesms/mms/ImageSlide/getImageDimensions [object java/io/InputStream] )
  (move-result-object v1)
  (return-object v1)
 )

(method (attrs private static ) getImageDimensions([object java/io/InputStream] )[object android/graphics/BitmapFactory$Options]
  (annotation systemVisibility [object dalvik/annotation/Throws]
    (value [array [object java/lang/String]] [object java/io/FileNotFoundException])
  )
  (limit registers 3)
  ; parameter[0] : v2 ([object java/io/InputStream])
  (line 89)
  (new-instance v0 android/graphics/BitmapFactory$Options)
  (invoke-direct {v0} android/graphics/BitmapFactory$Options/<init> )
  (line 90)
  (const/4 v1 1)
  (iput-boolean v1 v0 android/graphics/BitmapFactory$Options.inJustDecodeBounds boolean)
  (line 91)
  (const/4 v1 0)
  (invoke-static {v2 v1 v0} android/graphics/BitmapFactory/decodeStream [object java/io/InputStream] [object android/graphics/Rect] [object android/graphics/BitmapFactory$Options] )
  (line 93)
  (return-object v0)
 )

(method (attrs private static ) scaleImage([object android/content/Context] [object android/net/Uri] [object android/graphics/BitmapFactory$Options] long int int int )[array byte]
  (annotation systemVisibility [object dalvik/annotation/Throws]
    (value [array [object java/lang/String]] [object java/io/FileNotFoundException])
  )
  (limit registers 14)
  ; parameter[0] : v6 ([object android/content/Context])
  ; parameter[1] : v7 ([object android/net/Uri])
  ; parameter[2] : v8 ([object android/graphics/BitmapFactory$Options])
  ; parameter[3] : v9 (long)
  ; parameter[4] : v11 (int)
  ; parameter[5] : v12 (int)
  ; parameter[6] : v13 (int)
  (line 128)
  (const/4 v3 1)
  (label la556a)
  (line 129)
  (iget v4 v8 android/graphics/BitmapFactory$Options.outWidth int)
  (div-int/2addr v4 v3)
  (if-gt v4 v11 la55ec)
  (iget v4 v8 android/graphics/BitmapFactory$Options.outHeight int)
  (div-int/2addr v4 v3)
  (if-gt v4 v12 la55ec)
  (line 132)
  (iput v3 v8 android/graphics/BitmapFactory$Options.inSampleSize int)
  (line 133)
  (const/4 v4 0)
  (iput-boolean v4 v8 android/graphics/BitmapFactory$Options.inJustDecodeBounds boolean)
  (line 135)
  (invoke-virtual {v6} android/content/Context/getContentResolver )
  (move-result-object v4)
  (invoke-virtual {v4 v7} android/content/ContentResolver/openInputStream [object android/net/Uri] )
  (move-result-object v4)
  (const/4 v5 0)
  (invoke-static {v4 v5 v8} android/graphics/BitmapFactory/decodeStream [object java/io/InputStream] [object android/graphics/Rect] [object android/graphics/BitmapFactory$Options] )
  (move-result-object v1)
  (label la55a2)
  (line 136)
  (new-instance v0 java/io/ByteArrayOutputStream)
  (invoke-direct {v0} java/io/ByteArrayOutputStream/<init> )
  (label la55ac)
  (line 137)
  (const/16 v2 80)
  (label la55b0)
  (line 140)
  (sget-object v4 android/graphics/Bitmap$CompressFormat.JPEG [object android/graphics/Bitmap$CompressFormat])
  (invoke-virtual {v1 v4 v2 v0} android/graphics/Bitmap/compress [object android/graphics/Bitmap$CompressFormat] int [object java/io/OutputStream] )
  (line 141)
  (invoke-virtual {v0} java/io/ByteArrayOutputStream/size )
  (move-result v4)
  (if-le v4 v13 la55d6)
  (line 142)
  (mul-int v4 v2 v13)
  (invoke-virtual {v0} java/io/ByteArrayOutputStream/size )
  (move-result v5)
  (div-int v2 v4 v5)
  (label la55d6)
  (line 143)
  (invoke-virtual {v0} java/io/ByteArrayOutputStream/size )
  (move-result v4)
  (if-gt v4 v13 la55b0)
  (line 145)
  (invoke-virtual {v0} java/io/ByteArrayOutputStream/toByteArray )
  (move-result-object v4)
  (return-object v4)
  (label la55ec)
  (line 130)
  (mul-int/lit8 v3 v3 2)
  (goto la556a)
 )

(method (attrs public ) getThumbnail()[object android/graphics/Bitmap]
  (limit registers 11)
  ; this: v10 ([object org/thoughtcrime/securesms/mms/ImageSlide])
  (catch java/io/FileNotFoundException from la5676 to la56dc using la56e6)
  (const/16 v9 480)
  (line 59)
  (sget-object v7 org/thoughtcrime/securesms/mms/ImageSlide.thumbnailCache [object java/util/LinkedHashMap])
  (iget-object v8 v10 org/thoughtcrime/securesms/mms/ImageSlide.part [object ws/com/google/android/mms/pdu/PduPart])
  (invoke-virtual {v8} ws/com/google/android/mms/pdu/PduPart/getDataUri )
  (move-result-object v8)
  (invoke-virtual {v7 v8} java/util/LinkedHashMap/containsKey [object java/lang/Object] )
  (move-result v7)
  (if-eqz v7 la5676)
  (line 60)
  (const-string v7 "ImageSlide")
  (const-string v8 "Cached thumbnail...")
  (invoke-static {v7 v8} android/util/Log/w [object java/lang/String] [object java/lang/String] )
  (line 61)
  (sget-object v7 org/thoughtcrime/securesms/mms/ImageSlide.thumbnailCache [object java/util/LinkedHashMap])
  (iget-object v8 v10 org/thoughtcrime/securesms/mms/ImageSlide.part [object ws/com/google/android/mms/pdu/PduPart])
  (invoke-virtual {v8} ws/com/google/android/mms/pdu/PduPart/getDataUri )
  (move-result-object v8)
  (invoke-virtual {v7 v8} java/util/LinkedHashMap/get [object java/lang/Object] )
  (move-result-object v7)
  (check-cast v7 [object java/lang/ref/SoftReference])
  (invoke-virtual {v7} java/lang/ref/SoftReference/get )
  (move-result-object v0)
  (check-cast v0 [object android/graphics/Bitmap])
  (label la565a)
  (line 62)
  (if-eqz v0 la5660)
  (label la565e)
  (line 84)
  (return-object v0)
  (label la5660)
  (line 63)
  (sget-object v7 org/thoughtcrime/securesms/mms/ImageSlide.thumbnailCache [object java/util/LinkedHashMap])
  (iget-object v8 v10 org/thoughtcrime/securesms/mms/ImageSlide.part [object ws/com/google/android/mms/pdu/PduPart])
  (invoke-virtual {v8} ws/com/google/android/mms/pdu/PduPart/getDataUri )
  (move-result-object v8)
  (invoke-virtual {v7 v8} java/util/LinkedHashMap/remove [object java/lang/Object] )
  (label la5676)
  (line 67)
  (invoke-virtual {v10} org/thoughtcrime/securesms/mms/ImageSlide/getPartDataInputStream )
  (move-result-object v7)
  (invoke-static {v7} org/thoughtcrime/securesms/mms/ImageSlide/getImageDimensions [object java/io/InputStream] )
  (move-result-object v4)
  (label la5686)
  (line 68)
  (iget v3 v4 android/graphics/BitmapFactory$Options.outWidth int)
  (label la568a)
  (line 69)
  (iget v2 v4 android/graphics/BitmapFactory$Options.outHeight int)
  (label la568e)
  (line 71)
  (const/4 v5 1)
  (label la5690)
  (line 72)
  (div-int v7 v3 v5)
  (if-gt v7 v9 la56e0)
  (div-int v7 v2 v5)
  (if-gt v7 v9 la56e0)
  (line 75)
  (iput v5 v4 android/graphics/BitmapFactory$Options.inSampleSize int)
  (line 76)
  (const/4 v7 0)
  (iput-boolean v7 v4 android/graphics/BitmapFactory$Options.inJustDecodeBounds boolean)
  (line 78)
  (invoke-virtual {v10} org/thoughtcrime/securesms/mms/ImageSlide/getPartDataInputStream )
  (move-result-object v7)
  (const/4 v8 0)
  (invoke-static {v7 v8 v4} android/graphics/BitmapFactory/decodeStream [object java/io/InputStream] [object android/graphics/Rect] [object android/graphics/BitmapFactory$Options] )
  (move-result-object v6)
  (label la56bc)
  (line 79)
  (sget-object v7 org/thoughtcrime/securesms/mms/ImageSlide.thumbnailCache [object java/util/LinkedHashMap])
  (iget-object v8 v10 org/thoughtcrime/securesms/mms/ImageSlide.part [object ws/com/google/android/mms/pdu/PduPart])
  (invoke-virtual {v8} ws/com/google/android/mms/pdu/PduPart/getDataUri )
  (move-result-object v8)
  (new-instance v9 java/lang/ref/SoftReference)
  (invoke-direct {v9 v6} java/lang/ref/SoftReference/<init> [object java/lang/Object] )
  (invoke-virtual {v7 v8 v9} java/util/LinkedHashMap/put [object java/lang/Object] [object java/lang/Object] )
  (label la56dc)
  (move-object v0 v6)
  (line 81)
  (goto la565e)
  (label la56e0)
  (line 73)
  (mul-int/lit8 v5 v5 2)
  (goto la5690)
  (label la56e6)
  (line 82)
  (move-exception v1)
  (line 83)
  (const-string v7 "ImageSlide")
  (invoke-static {v7 v1} android/util/Log/w [object java/lang/String] [object java/lang/Throwable] )
  (line 84)
  (iget-object v7 v10 org/thoughtcrime/securesms/mms/ImageSlide.context [object android/content/Context])
  (invoke-virtual {v7} android/content/Context/getResources )
  (move-result-object v7)
  (const v8 2130837620) ; 0x7f020074)
  (invoke-static {v7 v8} android/graphics/BitmapFactory/decodeResource [object android/content/res/Resources] int )
  (move-result-object v0)
  (goto la565e)
)

(method (attrs public ) hasImage()boolean
  (limit registers 2)
  ; this: v1 ([object org/thoughtcrime/securesms/mms/ImageSlide])
  (line 103)
  (const/4 v0 1)
  (return v0)
)

)
